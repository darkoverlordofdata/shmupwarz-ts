<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>WebGL Demo</title>
    <link rel="stylesheet" href="./webgl.css" type="text/css">

    <link name="sprite_frag"  rel="preload" href="assets/shaders/sprite.frag" as="fetch" crossorigin>
    <link name="sprite_vs"    rel="preload" href="assets/shaders/sprite.vs" as="fetch" crossorigin>
    <!-- <link name="demo_frag"  rel="preload" href="assets/shaders/demo.frag" as="fetch" crossorigin>
    <link name="demo_vs"    rel="preload" href="assets/shaders/demo.vs" as="fetch" crossorigin> -->
    <link name="awesomeface"rel="preload" href="assets/textures/awesomeface.png" as="image">
    <link name="container"  rel="preload" href="assets/textures/container.jpg" as="image">

    <script src="js/app.js" ></script>
  </head>
  <body>
    <!-- <script defer>

        const images = new Array()

        const assets = document.getElementsByClassName("asset")
        for (var i=0; i<assets.length; i++) {
          const asset = assets[i]
          if (asset.tagName == 'LINK' && asset.getAttribute('rel') == 'preload') {
            switch (asset.getAttribute('as')) {
              case 'fetch':
                var x = new XMLHttpRequest()
                x.onload = function() {

                  console.log('---------------- fetch ------------------------')
                  console.log( this.responseText )
                  console.log(this)
                  console.log('-----------------------------------------------')

                }
                // x.addEventListener("load", fetch_loaded);
                x.open("GET", asset.href)
                x.send();
                break

              case 'image':
                const image = new Image()
                image.onload = function() {

                    console.log('---------------- image ------------------------')
                    console.log( image.src )
                    console.log(this)
                    console.log('-----------------------------------------------')
                    images.push(image)

                }
                image.src = asset.href

                break


            }
          }
          
        }

        (function(){
            const makeHint = (href, type) => {
                let link = document.createElement("link");
                link.setAttribute("rel", type);
                link.setAttribute("href", href);
                document.head.appendChild(link);
                return href;
            };
        })();
            
          </script> -->
        </body>
</html>